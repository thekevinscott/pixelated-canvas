{"id":"../node_modules/pixelated-canvas/dist/index.js","dependencies":[{"name":"/www/pixelated-canvas/node_modules/pixelated-canvas/dist/index.js.map","includedInParent":true,"mtime":1544147084779},{"name":"/www/pixelated-canvas/package.json","includedInParent":true,"mtime":1544181444471},{"name":"/www/pixelated-canvas/node_modules/pixelated-canvas/package.json","includedInParent":true,"mtime":1544147084779},{"name":"color","loc":{"line":3,"column":20},"parent":"/www/pixelated-canvas/node_modules/pixelated-canvas/dist/index.js","resolved":"/www/pixelated-canvas/node_modules/color/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Color = require(\"color\");\nvar makeElement = function (type, opts) {\n    if (type === void 0) { type = 'div'; }\n    if (opts === void 0) { opts = {}; }\n    var el = document.createElement(type);\n    Object.keys(opts).forEach(function (key) {\n        el[key] = opts[key];\n    });\n    return el;\n};\nvar BACKGROUND_COLORS = [\n    Color.rgb(235, 235, 235),\n    Color.rgb(255, 255, 255),\n];\nvar PAINT_COLOR = Color.rgb(0, 0, 0);\n// const BACKGROUND_COLORS = [\n//   `rgb(${Array(3).fill(35).join(',')})`,\n//   `rgb(${Array(3).fill(0).join(',')})`,\n// ];\n// const PAINT_COLOR = `rgb(${Array(3).fill(255).join(',')})`;\nvar Canvas = /** @class */ (function () {\n    // private lastE:MouseEvent;\n    function Canvas() {\n        var _this = this;\n        this.mouseIsDown = false;\n        this.backgroundRows = 28;\n        this.backgroundCols = 28;\n        this.drawBackground = function () {\n            for (var row = 0; row < _this.backgroundRows; row++) {\n                for (var col = 0; col < _this.backgroundCols; col++) {\n                    var color = BACKGROUND_COLORS[(col + row + 1) % 2];\n                    _this.drawRect(color, col * _this.pixelW, row * _this.pixelH);\n                }\n            }\n        };\n        this.getCanvasData = function () { return _this.ctx.getImageData(0, 0, _this.canvas.width, _this.canvas.height); };\n        this.drawPixel = function (x, y, color) {\n            if (color === void 0) { color = PAINT_COLOR; }\n            x -= 10;\n            y -= 10;\n            if (x > _this.canvas.width || y > _this.canvas.height || x < 0 || y < 0) {\n                return;\n            }\n            // convert e event to pixelated pixels\n            x = Math.floor(x / _this.pixelW);\n            y = Math.floor(y / _this.pixelH);\n            for (var col = x - 1; col <= x + 1; col++) {\n                for (var row = y - 1; row <= y + 1; row++) {\n                    var pixelColor = void 0;\n                    if (row === y && col === x) {\n                        pixelColor = color;\n                    }\n                    else if (row === y || col === x) {\n                        pixelColor = color.fade(0.5);\n                    }\n                    else {\n                        pixelColor = color.fade(0.8);\n                    }\n                    _this.pixels[(row * _this.canvas.width) + col] = pixelColor.toString();\n                    _this.drawRect(pixelColor, col * _this.pixelW, row * _this.pixelH);\n                }\n            }\n        };\n        this.getPixels = function () { return _this.pixels; };\n        this.drawRect = function (color, x, y, width, height) {\n            if (width === void 0) { width = _this.pixelW; }\n            if (height === void 0) { height = _this.pixelH; }\n            _this.ctx.fillStyle = color.toString();\n            _this.ctx.fillRect(x, y, width, height);\n        };\n        this.updateCanvasData = function (data) { return _this.ctx.putImageData(data, 0, 0, 0, 0, _this.canvas.width, _this.canvas.height); };\n        this.onMouseDown = function (e) {\n            _this.mouseIsDown = true;\n            // this.lastE = e;\n            _this.drawPixel(e.x, e.y);\n        };\n        this.onMouseUp = function () {\n            _this.mouseIsDown = false;\n        };\n        this.onMouseMove = function (e) {\n            if (_this.ctx && _this.mouseIsDown) {\n                // this.lastE = e;\n                // console.log('lasts and current');\n                // console.log(this.lastE.x, this.lastE.y, e.x, e.y);\n                _this.drawPixel(e.x, e.y);\n            }\n        };\n        this.canvas = makeElement('canvas', {\n            height: 560,\n            width: 560,\n        });\n        this.pixelW = this.canvas.width / this.backgroundRows;\n        this.pixelH = this.canvas.height / this.backgroundCols;\n        this.pixels = Array(this.pixelW * this.pixelH).fill('rgba(0,0,0,0');\n        var ctx = this.canvas.getContext('2d');\n        if (ctx === null) {\n            throw new Error('Context is null; your browser does not support canvas');\n        }\n        this.ctx = ctx;\n        this.canvas.onmousedown = this.onMouseDown;\n        window.onmouseup = this.onMouseUp;\n        this.canvas.onmousemove = this.onMouseMove;\n        this.drawBackground();\n    }\n    Canvas.prototype.render = function (target) {\n        target.appendChild(this.canvas);\n    };\n    return Canvas;\n}());\nexports.default = Canvas;\n","map":{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"hash":"c56154d6f072faced9ebe1edefa75013","cacheData":{"env":{}}}